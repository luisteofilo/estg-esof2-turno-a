@page "/games"
@using System.Collections.Generic
@using System.Threading.Tasks
@using Frontend.Helpers
@using global::Helpers.Models
@inject ApiHelper ApiHelper

<h1 class="text-center mt-4 retro-title">Games Emulator</h1>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div id="game-container" class="game-container"></div>
        </div>
    </div>

    <div id="box">
        <input type="file" id="input" />
        Drag ROM file or click here
    </div>

    <h2 class="mt-5 retro-subtitle" style="text-align: left;">Explore Games:</h2>
    
    <div class="row mt-4">
        <div class="col-md-12">
            <div class="card-scroll-container">
                @if (_games == null)
                {
                    <p><em>Loading...</em></p>
                }
                else
                {
                    <div class="card-deck">
                        @if (_games != null && _games.Length > 0)
                        {
                            @foreach (var game in _games)
                            {
                                <div class="card retro-card">
                                    <img class="card-img-top img-fluid" src="@game.UrlImage" alt="@game.Name">
                                    <div class="card-body">
                                        <h5 class="card-title retro-card-title">@game.Name</h5>
                                        <a href="#" class="btn btn-primary btn-block retro-btn">Play Now</a>
                                    </div>
                                </div>
                            }
                        }
                        else
                        {
                            <p>No games found.</p>
                        }
                    </div>

                }

            </div>
        </div>
    </div>
</div>

<style>
    .card-scroll-container {
        overflow-x: auto;
        white-space: nowrap;
    }

    .card {
        width: 18rem;
        display: inline-block;
        margin-right: 1rem;
        margin-bottom: 1rem;
        vertical-align: top;
    }

    .card-img-top {
        height: 200px;
        object-fit: cover;
    }

    .retro-card {
        border: 2px solid #ffc107;
        border-radius: 10px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        background-color: #f8f9fa;
    }

    .retro-card-title {
        font-size: 1.25rem;
        font-weight: bold;
    }

    .retro-card-text {
        font-size: 1rem;
    }

    .retro-btn {
        background-color: #343a40;
        border-color: #343a40;
    }

    .retro-btn:hover {
        background-color: #23272b;
        border-color: #23272b;
    }
    
     .card-img-top {
         max-width: 100%;
         height: auto;
     }

    .card {
       
        width: 15rem;
      
    }

    .card-img-top {
        width: 100%; 
        height: 240px; 
}
</style>

@code {
private GamesViewModel[] _games;

protected override async Task OnInitializedAsync()
{
_games = await ApiHelper.GetFromApiAsync<GamesViewModel[]>("games");
}
}
